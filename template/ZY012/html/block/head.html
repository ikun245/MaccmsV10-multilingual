<header class="stui-header clearfix" style="margin: 0; padding: 0; background: #1c1b1e; border-bottom: 1px solid #29262d;">
	<div class="container">	
		<!-- 第一行：Logo, 搜索, 用户中心 -->
		<div class="row" style="display: flex !important; align-items: center !important; justify-content: space-between !important; padding: 15px 0; margin: 0;">
			<div class="stui-header__logo" style="margin: 0 !important; padding: 0 !important; flex-shrink: 0; float: none !important;">
				<a class="logo" href="{$maccms.path}" style="margin: 0; display: block; width: 150px; height: 40px; background: url({$maccms.site_logo|mac_default='https://www.yuana.fun/static/images/logo.png'}) no-repeat; background-size: contain; background-position: left center;"></a>										  
			</div>
			
			<div class="header-search" style="flex-grow: 1; margin: 0 30px; max-width: 600px; position: relative;">
				<form id="search" name="search" method="POST" action="{:mac_url('vod/search')}" onSubmit="return qrsearch();" style="margin: 0;">
					<input type="text" id="wd" name="wd" class="form-control" value="{$param.wd}" placeholder="请输入关键词..." style="width: 100%; height: 40px; border-radius: 20px; padding: 0 45px 0 20px; border: 1px solid #333; background: #29262d; color: #ccc;"/>
					<button class="submit" id="searchbutton" type="submit" name="submit" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #999; cursor: pointer;"><i class="icon iconfont icon-search" style="font-size: 20px;"></i></button>							
				</form>
			</div>

			<ul class="stui_header__user" style="margin: 0 !important; padding: 0 !important; display: flex !important; align-items: center !important; list-style: none; flex-shrink: 0; float: none !important;">
				<li class="has-dropdown" style="position: relative; margin-left: 20px; float: none !important; padding: 0 !important;">
					<a href="javascript:;" style="display: block; color: #eee; font-size: 15px;">登录</a>
					<div class="dropdown login-menu" style="display: none; position: absolute; left: 50%; transform: translateX(-50%); width: 160px; z-index: 999; background: #29262d; border: 1px solid #333; box-shadow: 0 2px 10px rgba(0,0,0,0.5); border-radius: 4px; margin-top: 15px;">
						<div class="head" style="padding: 10px; border-bottom: 1px solid #333; background: #1c1b1e; border-radius: 4px 4px 0 0;">
							<h5 style="margin: 0; text-align: center; color: #eee;">用户登录</h5>
						</div>
						<ul class="clearfix" style="padding: 15px; margin: 0; list-style: none;">
							<li style="display: block; width: 100%; margin-bottom: 10px; text-align: center;"><a href="{:mac_url('user/login')}" style="display: block; padding: 8px; background: #ff5c7c; color: #fff; text-align: center; border-radius: 4px; font-size: 14px;">账号登录</a></li>
							<li style="display: block; width: 100%; text-align: center;"><a href="{:mac_url('user/reg')}" style="display: block; padding: 8px; border: 1px solid #ff5c7c; color: #ff5c7c; text-align: center; border-radius: 4px; font-size: 14px;">立即注册</a></li>
						</ul>
					</div>
				</li>
				<li style="margin-left: 20px; float: none !important; padding: 0 !important;">
					<a href="{:mac_url('user/index')}" style="color: #eee; font-size: 15px;">用户中心</a>
				</li>
				<li class="has-dropdown" style="position: relative; margin-left: 20px; float: none !important; padding: 0 !important;">
					<a href="javascript:;" id="languageToggle" style="color: #eee; font-size: 15px; display: flex; align-items: center;">
						<svg t="1767423849545" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2548" width="18" height="18" style="margin-right:5px;"><path d="M848.805886 805.572222c70.998007-81.260745 109.779266-184.217628 109.779266-293.14448 0-119.204939-46.421262-231.277434-130.713041-315.569212C744.876861 113.862257 634.94103 67.61598 517.788843 66.213028c-1.924839-0.599657-10.290367-0.592494-12.227486 0.01535C388.878868 67.945485 279.434224 114.159016 196.73471 196.85853 113.863281 279.730982 67.630307 389.460106 66.095347 506.415818c-0.428765 1.64957-0.436952 8.601912-0.021489 10.226922 1.082658 117.628024 47.364751 228.058113 130.660852 311.354214 84.291778 84.291778 196.36325 130.713041 315.569212 130.713041 119.204939 0 231.277434-46.421262 315.569212-130.713041 6.139837-6.139837 12.054547-12.444427 17.789155-18.871813 0.50756-0.453325 1.001817-0.928139 1.471514-1.440815C847.750857 807.012014 848.295256 806.299793 848.805886 805.572222zM107.447151 532.043499l187.501418 0c1.322112 65.678862 9.253758 127.264499 22.505573 182.112688-61.690014 16.687054-100.819197 38.371936-121.076566 51.906184C144.30971 701.336206 111.676475 620.35687 107.447151 532.043499zM195.881272 259.408121c20.090571 13.556761 59.242266 35.461653 121.340579 52.260248-12.998035 54.127781-20.827351 114.778116-22.243607 179.432649L107.525945 491.101018C112.076588 403.731134 144.437623 323.612399 195.881272 259.408121zM917.081898 491.099994 729.628576 491.099994c-1.415232-64.630996-9.240455-125.260865-22.229281-179.37432 61.95505-16.693194 101.235682-38.444591 121.56673-52.020794C880.270505 323.860039 912.537396 403.866211 917.081898 491.099994zM688.677908 491.099994 532.167319 491.099994 532.167319 335.061149c52.209082-1.094938 97.103572-6.453992 135.272893-14.033621C680.000272 373.163955 687.286212 430.896844 688.677908 491.099994zM532.167319 294.115598 532.167319 109.918435c36.84107 10.398838 72.779583 49.205679 100.926644 110.015649 8.810666 19.035542 16.645099 39.641859 23.464411 61.521169C621.531626 288.227494 580.261687 293.062616 532.167319 294.115598zM491.223814 110.273523l0 183.805236c-47.504944-1.12666-88.378863-6.001691-123.120109-12.802584 6.807033-21.812795 14.623046-42.35976 23.409153-61.344137C419.351903 159.792333 454.809463 121.175827 491.223814 110.273523zM491.223814 335.040682l0 156.059312L335.928912 491.099994c1.391696-60.213383 8.679683-117.955482 21.243837-170.099073C395.008472 328.536548 439.487499 333.887416 491.223814 335.040682zM335.893096 532.043499l155.330718 0 0 158.667719c-51.609425 1.194198-96.019891 6.563486-133.821845 14.103206C344.576873 651.927913 337.193719 593.243349 335.893096 532.043499zM491.223814 731.672118l0 182.909843c-36.415374-10.902304-71.871911-49.51881-99.709933-109.659539-8.679683-18.752086-16.409738-39.034015-23.157419-60.551074C402.9964 737.645157 443.773106 732.820268 491.223814 731.672118zM532.167319 914.937049 532.167319 731.608673c47.904033 1.025353 89.103364 5.862521 124.116809 12.656251-6.755868 21.555945-14.497179 41.87369-23.190165 60.656475C604.946902 865.73137 569.008388 904.538211 532.167319 914.937049zM532.167319 690.660052 532.167319 532.043499l156.546406 0c-1.298576 61.096497-8.66024 119.68487-21.445428 172.502819C629.154233 697.013761 584.319096 691.710988 532.167319 690.660052zM729.659275 532.043499l187.501418 0c-4.221138 88.138386-36.732599 168.973436-88.620363 233.635131-20.469194-13.668301-59.635215-35.298947-121.30374-51.868321C720.43724 659.049101 728.33921 597.585237 729.659275 532.043499zM801.518906 228.742704c-18.329461 11.570523-52.309366 29.355585-104.858186 43.493583-19.295462-63.056128-46.110177-115.004267-78.06189-150.97655C689.00025 140.410913 751.833297 178.097234 801.518906 228.742704zM406.007991 121.259738c-31.905664 35.920094-58.690704 87.768973-77.979002 150.702304-52.40351-14.241352-86.370113-32.099069-104.581893-43.587728C273.076422 177.914062 335.777463 140.364865 406.007991 121.259738zM223.917816 796.963147c18.284435-11.535731 52.098565-29.230742 104.332207-43.335994 19.271926 62.60485 45.976124 114.186645 77.757968 149.968593C335.99952 884.550994 273.472442 847.181899 223.917816 796.963147zM618.59883 903.595746c31.801287-35.803437 58.517765-87.426165 77.792761-150.08218 51.984978 14.023388 85.972047 31.631418 104.533798 43.208081C751.3329 847.061149 688.718841 884.521319 618.59883 903.595746z" fill="currentColor" p-id="2549"></path></svg>语言</a>
					<div class="dropdown languagemenu_container" style="display: none; position: absolute; right: 0; top: 100%; z-index: 1000; background: #29262d; border: 1px solid #333; border-radius: 4px; width: 150px; max-height: 300px; overflow-y: auto; box-shadow: 0 2px 10px rgba(0,0,0,0.5); margin-top: 15px;">
						<span class="languagemenu_item" data-lang="chinese_simplified" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/cn.png" style="width:20px;margin-right:8px;vertical-align:middle;">简体中文</span>
						<span class="languagemenu_item" data-lang="chinese_traditional" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/hk.png" style="width:20px;margin-right:8px;vertical-align:middle;">繁體中文</span>
						<span class="languagemenu_item" data-lang="english" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/us.png" style="width:20px;margin-right:8px;vertical-align:middle;">English</span>
						<span class="languagemenu_item" data-lang="japanese" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/jp.png" style="width:20px;margin-right:8px;vertical-align:middle;">日本語</span>
						<span class="languagemenu_item" data-lang="korean" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/kr.png" style="width:20px;margin-right:8px;vertical-align:middle;">한국어</span>
						<span class="languagemenu_item" data-lang="french" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/fr.png" style="width:20px;margin-right:8px;vertical-align:middle;">Français</span>
						<span class="languagemenu_item" data-lang="spanish" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/es.png" style="width:20px;margin-right:8px;vertical-align:middle;">Español</span>
						<span class="languagemenu_item" data-lang="italian" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/it.png" style="width:20px;margin-right:8px;vertical-align:middle;">Italiano</span>
						<span class="languagemenu_item" data-lang="deutsch" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/de.png" style="width:20px;margin-right:8px;vertical-align:middle;">Deutsch</span>
						<span class="languagemenu_item" data-lang="turkish" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/tr.png" style="width:20px;margin-right:8px;vertical-align:middle;">Türkçe</span>
						<span class="languagemenu_item" data-lang="russian" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/ru.png" style="width:20px;margin-right:8px;vertical-align:middle;">Русский</span>
						<span class="languagemenu_item" data-lang="vietnamese" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/vn.png" style="width:20px;margin-right:8px;vertical-align:middle;">Tiếng Việt</span>
						<span class="languagemenu_item" data-lang="thai" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/th.png" style="width:20px;margin-right:8px;vertical-align:middle;">ไทย</span>
						<span class="languagemenu_item" data-lang="khmer" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/kh.png" style="width:20px;margin-right:8px;vertical-align:middle;">ភាសាខ្មែរ</span>
						<span class="languagemenu_item" data-lang="lao" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/la.png" style="width:20px;margin-right:8px;vertical-align:middle;">ພາສາລາວ</span>
						<span class="languagemenu_item" data-lang="malay" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/my.png" style="width:20px;margin-right:8px;vertical-align:middle;">Bahasa Melayu</span>
						<span class="languagemenu_item" data-lang="indonesian" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/id.png" style="width:20px;margin-right:8px;vertical-align:middle;">Bahasa Indonesia</span>
						<span class="languagemenu_item" data-lang="polish" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/pl.png" style="width:20px;margin-right:8px;vertical-align:middle;">Polski</span>
						<span class="languagemenu_item" data-lang="dutch" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/nl.png" style="width:20px;margin-right:8px;vertical-align:middle;">Nederlands</span>
						<span class="languagemenu_item" data-lang="portuguese" style="display: block; padding: 8px 15px; cursor: pointer; color: #ccc;"><img src="https://flagcdn.com/w20/pt.png" style="width:20px;margin-right:8px;vertical-align:middle;">Português</span>
					</div>
				</li>
			</ul>
		</div>

		<!-- 第二行：分类导航 -->
		<div class="row" style="border-top: 1px solid #29262d; padding: 10px 0; margin: 0;">
			<ul class="stui-header__menu" style="display: flex !important; flex-wrap: wrap !important; list-style: none; margin: 0; padding: 0; float: none !important; width: 100%;">
				<li {if condition="$maccms.aid eq 1"}class="active"{/if} style="flex: 1; margin: 0 5px 10px 5px; float: none !important; min-width: 80px;">
					<a href="{$maccms.path}" style="display: block; padding: 8px 0; border: 1px solid #333; border-radius: 4px; background: #29262d; color: #ccc; font-size: 15px; text-align: center;">首页</a>
				</li>
				{maccms:type num="15" order="asc" by="sort" ids="parent"}
				<li class="menu-item-has-children {if condition="($vo.type_id eq MAC_TYPE_ID || $vo.type_id eq MAC_TYPE_PID)"}active{/if}" style="flex: 1; position: relative; margin: 0 5px 10px 5px; float: none !important; min-width: 80px;">
					<a href="{:mac_url_type($vo)}" style="display: block; padding: 8px 0; border: 1px solid #333; border-radius: 4px; background: #29262d; color: #ccc; font-size: 15px; text-align: center;">{$vo.type_name}</a>
					<ul class="sub-menu" style="display: none; position: absolute; top: 100%; left: 0; z-index: 1000; background: #29262d; border: 1px solid #333; border-radius: 4px; min-width: 140px; padding: 5px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.5); list-style: none; margin: 0;">
						{maccms:type parent="'.$vo['type_id'].'" order="asc" by="sort"}
						<li><a href="{:mac_url_type($vo)}" style="display: block; padding: 10px 20px; color: #ccc; font-size: 14px; border-bottom: 1px solid #333;">{$vo.type_name}</a></li>
						{/maccms:type}
					</ul>
				</li>
				{/maccms:type}
				<li {if condition="$maccms.aid eq 30"}class="active"{/if} style="flex: 1; margin: 0 5px 10px 5px; float: none !important; min-width: 80px;">
					<a href="{:mac_url_topic_index()}" style="display: block; padding: 8px 0; border: 1px solid #333; border-radius: 4px; background: #29262d; color: #ccc; font-size: 15px; text-align: center;">专题</a>
				</li>
			</ul>
		</div>
	</div>
</header>

<style>
	.stui-header__menu li.active > a { background: #ff5c7c !important; color: #fff !important; border-color: #ff5c7c !important; }
	.stui-header__menu li:hover > a { border-color: #ff5c7c; color: #ff5c7c; background: #1c1b1e; }
	.stui-header__menu li:hover .sub-menu { display: block !important; }
	.sub-menu li:last-child a { border-bottom: none; }
	.sub-menu li a:hover { background: #1c1b1e; color: #ff5c7c !important; }
	.languagemenu_item:hover { background: #1c1b1e; color: #ff5c7c !important; }
	
	@media (max-width: 767px) {
		.stui-header .row:first-child { flex-direction: column !important; align-items: stretch !important; }
		.header-search { margin: 10px 0 !important; order: 2; width: 100% !important; max-width: none !important; }
		.stui-header__logo { text-align: center; order: 1; }
		.stui-header__logo .logo { margin: 0 auto !important; background-position: center center !important; }
		.stui_header__user { justify-content: center !important; order: 3; margin-top: 10px !important; }
		.stui_header__user li { margin: 0 10px !important; }
		.stui-header__menu li { flex: none !important; width: 30% !important; }
	}
</style>

<script type="text/javascript">
	$(document).ready(function(){
		$(".has-dropdown > a").click(function(e){
			var dropdown = $(this).parent().find(".dropdown");
			if (dropdown.length > 0) {
				e.preventDefault();
				e.stopPropagation();
				$(".dropdown").not(dropdown).hide();
				dropdown.toggle();
			}
		});
		$(document).click(function(e) {
			if (!$(e.target).closest('.has-dropdown').length) {
				$(".dropdown").hide();
			}
		});
	});
</script>

<!-- Banner Ads -->
<div class="container" style="margin-top: 10px;">
    {php}$banner_ads = get_multi_ad('banner');{/php}
    {if condition="$banner_ads"}
        {foreach name="banner_ads" item="vo"}
        <div class="row" style="margin-bottom: 10px;">
            <a href="{$vo.link}" target="_blank" style="display: block;">
                <img src="{$vo.img}" style="width: 100%; display: block; border-radius: 4px;">
            </a>
        </div>
        {/foreach}
    {/if}
</div>

<!-- Popup Ad -->
{php}$popup_ad = get_multi_ad('popup');{/php}
{if condition="$popup_ad"}
<div id="site-popup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 80%; max-height: 80%;">
        <a href="{$popup_ad.link}" target="_blank">
            <img src="{$popup_ad.img}" style="max-width: 100%; max-height: 80vh; border-radius: 8px;">
        </a>
        <span class="close-popup" style="position: absolute; top: -15px; right: -15px; width: 30px; height: 30px; background: #fff; border-radius: 50%; text-align: center; line-height: 30px; cursor: pointer; font-weight: bold; color: #333;">X</span>
    </div>
</div>
<script>
    $(document).ready(function(){
        var today = new Date().toDateString();
        if (localStorage.getItem('popup_date') !== today) {
            $('#site-popup').fadeIn();
        }
        $('.close-popup').click(function(){
            $('#site-popup').fadeOut();
            localStorage.setItem('popup_date', today);
        });
        $('#site-popup').click(function(e){
            if(e.target == this) {
                $(this).fadeOut();
                localStorage.setItem('popup_date', today);
            }
        });
    });
</script>
{/if}

